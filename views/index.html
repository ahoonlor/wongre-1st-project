<!DOCTYPE html>
<html class="no-js" lang="en">
    <head>
        <title>WongRe</title>
        <meta http-equiv="x-ua-compatible" content="ie=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800">
        <link rel='stylesheet' href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="/css/bootstrap.css">
        <link rel="stylesheet" href="/css/styles.css">
    </head>

    <body>
            <div class="container">
                    <nav class="navbar navbar-expand-lg navbar-dark bg-primary pt-0 pb-0">
                        <a class="navbar-brand" href="#">WongRe</a>
                        
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
                                <span class="navbar-toggler-icon"></span>
                        </button>
                        
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ml-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="#">Home</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">About</a>
                                </li>
                                <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" data-toggle="dropdown">
                                            Products
                                        </a>
                                        <div class="dropdown-menu">
                                            <a class="dropdown-item" href="#">Product 1</a>
                                            <a class="dropdown-item" href="#">Product 2</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="#">Another Product</a>
                                        </div>
                                    </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">Contact</a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                    <div class="jumbotron pt-3 mb-3 jumbotronHeaderImg">
                            <h1 class="display-5 mb-3">Flight Delay Insurance</h1>
                            <small>When your flight is delayed. We pay without claimming. </small><br>
                           <small>Smart flight insurance powered by blockchain technology.</small>
                           
                    </div>
                    <div class="jumbotron"  >
                        <form>
                            <div class="tab">
                                <h2 class="display-5">Customer and Flight Information</h1>
                               <div class="form-row">
                                   <div class="form-group col">
                                       <label for="inputName">First Name</label>
                                       <input type="text" class="form-control" id="inputName" placeholder="First name" required>
                                   </div>
                                   <div class="form-group col">
                                        <label for="inputLastName">Last name</label>
                                        <input type="text" class="form-control" id="inputLastName" placeholder="Last name" required>
                                    </div>
                                    <div class="form-group col">
                                        <label for="inputEmail">Email</label>
                                        <input type="email" class="form-control" id="inputEmail" placeholder="Email" required>
                                    </div>
                               </div>
                               <div class="form-row">
                                    <div class="form-group col-md-2">
                                        <label for="date">Date of departure</label>
                                        <input type="date" id="date" required>
                                    </div>
                                    <div class="form-group col-md-5">
                                        <label for="inputFromAirport">From</label>
                                        <select id="inputFromAirport" class="form-control" required>
                                            <option disabled selected hidden>Choose...</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-5">
                                        <label for="inputToAirport">To</label>
                                        <select id="inputToAirport" class="form-control" required>
                                            <option disabled selected hidden>Choose...</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="gridCheck" required>
                                        <label class="form-check-label" for="gridCheck">
                                            Please confirm that you have a ticket for this flight
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <!-- list all flights based on date, from airport, to airport -->
                            <div class="tab">
                                <h2 class="display-5 mb-3">Select your flight</h1>
                                <div class="im-centered row">
                                <img id="loader" src="https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif">
                                </div>
                                <div class="form-group" id="demo">
                                    <fieldset class="form-group row">
                                        <legend class="col-form-legend row">Radios</legend>
                                        <div class="form-row">
                                            <div class="form-check form-check-inline">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1"> NH808
                                            </label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2"> 9W4147
                                            </label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3"> TG6006
                                            </label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio4" value="option4"> ET1412
                                            </label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio5" value="option5"> UA7955
                                            </label>
                                            </div>
                                        </div>
                                        
                                    </fieldset>
                                </div>
                            </div>
                            <!-- show policys -->
                            <div class="tab">
                                <h2 class="display-5 mb-3">Select your policy</h1>
                                <fieldset class="form-group">
                                    <div class="row">
                                        <legend class="col-form-label col-sm-2 pt-0">Policy</legend>
                                        <div class="col-sm-10">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1" value="option1" checked>
                                            <label class="form-check-label" for="gridRadios1">
                                                Delay in 15-29 minutes: Pay 500 Bath Recieve 2000 Bath. 
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2" value="option2">
                                            <label class="form-check-label" for="gridRadios2">
                                                Delay in 30-44 minutes: Pay 400 Bath Recieve 1000 Bath. 
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios3" value="option3">
                                            <label class="form-check-label" for="gridRadios3">
                                                Delay in 45+ minutes: Pay 300 Bath Recieve 1000 Bath.
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios4" value="option4">
                                            <label class="form-check-label" for="gridRadios4">
                                                Cancelled: Pay 100 Bath Recieve 1000 Bath.
                                            </label>
                                        </div>
                                    </div>
                                    </div>
                                </fieldset>
                                <hr>
                                <fieldset class="form-group">
                                    <div class="row">
                                        <legend class="col-form-label col-sm-2 pt-0">Payment</legend>
                                        <div class="col-sm-10">
                                            <div class="form-row">
                                                <div class="form-group col">
                                                    <!-- Name -->
                                                    <label for="cardName">Card Holder's Name</label>
                                                    <input type="text" id="cardName" name="cardName" placeholder="" class="form-control">
                                                </div>
                                                <div class="form-group col">
                                                    <!-- Card Number -->
                                                    <label class="control-label" for="cardNum">Card Number</label>
                                                    <input type="text" id="cardNum" name="cardNum" placeholder="" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="form-group col-3">
                                                    <!-- Expiry date-->
                                                    <label class="control-label" for="expiry_month">Card Expiry Date</label>
                                                    <select class="form-control" name="expiry_month" id="expiry_month">
                                                            <option></option>
                                                            <option value="01">Jan (01)</option>
                                                            <option value="02">Feb (02)</option>
                                                            <option value="03">Mar (03)</option>
                                                            <option value="04">Apr (04)</option>
                                                            <option value="05">May (05)</option>
                                                            <option value="06">June (06)</option>
                                                            <option value="07">July (07)</option>
                                                            <option value="08">Aug (08)</option>
                                                            <option value="09">Sep (09)</option>
                                                            <option value="10">Oct (10)</option>1
                                                            <option value="11">Nov (11)</option>
                                                            <option value="12">Dec (12)</option>
                                                    </select>
                                                </div>
                                                <div class="form-group col-2">
                                                    <!-- Expiry year-->
                                                    <label class="control-label" for="expiry_month">Card Expiry year</label>
                                                    <select class="form-control" name="expiry_year">
                                                            <option value="13">2013</option>
                                                            <option value="14">2014</option>
                                                            <option value="15">2015</option>
                                                            <option value="16">2016</option>
                                                            <option value="17">2017</option>
                                                            <option value="18">2018</option>
                                                            <option value="19">2019</option>
                                                            <option value="20">2020</option>
                                                            <option value="21">2021</option>
                                                            <option value="22">2022</option>
                                                            <option value="23">2023</option>
                                                    </select>
                                                </div>
                                                <div class="form-group col-3">
                                                    <!-- CVV-->
                                                    <label class="control-label"  for="cardCVV">Card CVV</label>
                                                    <input type="password" id="cardCVV" name="cardCVV" placeholder="" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <!-- Save card -->
                                                <label class="checkbox" for="save_card">
                                                    <input type="checkbox" id="save_card" value="option1">
                                                    Save card on file?
                                                </label>
                                            </div>
                                        </div>
                                    </div>       
                                </fieldset>
                            </div>  
                            <div style="overflow:auto;">
                                <div style="float:left;">
                                    <button type="button" class="btn btn-primary" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
                                    <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextPrev(1)">Next</button>
                                </div>
                            </div>
                            <!-- Circles which indicates the steps of the form: -->
                            <div style="text-align:center;margin-top:40px;">
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                            </div>
                        </form> 
                          
                    </div>


            <!--Footer-->
            <footer class="page-footer font-small blue pt-4 mt-4">

                <!--Footer Links-->
                <div class="container-fluid text-center text-md-left">
                    <div class="row">
            
                        <!--First column-->
                        <div class="col-md-12">
                            <h5 class="text-uppercase">Footer Content</h5>
                            <p>Here you can use rows and columns here to organize your footer content.</p>
                        </div>
                        <!--/.First column-->
                </div>
                <!--/.Footer Links-->
            
                
            
            </footer>
            <!--/.Footer-->
            <!--Copyright-->
            <div class="footer-copyright py-2 text-center">
                    © 2018 Copyright:
                    <a href="#"> WongRe.com </a>
            </div>
            <!--/.Copyright-->
                          

                </div>
    
        <script src="/js/jquery.min.js"></script>
        <script src="/js/popper.min.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/allairport.js"></script>
        <script>

            var airportfromselect = $("#inputFromAirport")
            var airporttoselect = $("#inputToAirport")
            //console.log(objAllAirports);
            for (var index in objAllAirports.airports) {
                //console.log(index);
                var optionFrom = document.createElement('option');
                var optionTo = document.createElement('option');
                optionFrom.innerHTML = objAllAirports.airports[index].label;
                optionFrom.value = objAllAirports.airports[index].value;
                optionTo.innerHTML = objAllAirports.airports[index].label;
                optionTo.value = objAllAirports.airports[index].value;
                airportfromselect.append(optionFrom);
                airporttoselect.append(optionTo);
            }
            var currentTab = 0; // Current tab is set to be the first tab (0)
            showTab(currentTab); // Display the crurrent tab

            function showTab(n) {
                if (n == 1){
                    searchflights();
                }
                // This function will display the specified tab of the form...
                var x = document.getElementsByClassName("tab");
                x[n].style.display = "block";
                //... and fix the Previous/Next buttons:
                if (n == 0) {
                    document.getElementById("prevBtn").style.display = "none";
                } else {
                    document.getElementById("prevBtn").style.display = "inline";
                }
                if (n == (x.length - 1)) {
                    document.getElementById("nextBtn").innerHTML = "Submit";
                } else {
                    document.getElementById("nextBtn").innerHTML = "Next";
                }
                //... and run a function that will display the correct step indicator:
                fixStepIndicator(n)
            }

            function nextPrev(n) {
                // This function will figure out which tab to display
                var x = document.getElementsByClassName("tab");
                // Exit the function if any field in the current tab is invalid:
                if (n == 1 && !validateForm()) return false;
                // Hide the current tab:
                x[currentTab].style.display = "none";
                // Increase or decrease the current tab by 1:
                currentTab = currentTab + n;
                // if you have reached the end of the form...
                if (currentTab >= x.length) {
                    // ... the form gets submitted:
                    document.getElementById("regForm").submit();
                    return false;
                }
                // Otherwise, display the correct tab:
                showTab(currentTab);
                }

                function validateForm() {
                // This function deals with validation of the form fields
                var x, y, i, valid = true;
                x = document.getElementsByClassName("tab");
                y = x[currentTab].getElementsByTagName("input");
                // A loop that checks every input field in the current tab:
                for (i = 0; i < y.length; i++) {
                    // If a field is empty...
                    if (y[i].value == "") {
                    // add an "invalid" class to the field:
                    y[i].className += " invalid";
                    // and set the current valid status to false
                    valid = false;
                    }
                }
                // If the valid status is true, mark the step as finished and valid:
                if (valid) {
                    document.getElementsByClassName("step")[currentTab].className += " finish";
                }
                return valid; // return the valid status
                }

                function fixStepIndicator(n) {
                // This function removes the "active" class of all steps...
                var i, x = document.getElementsByClassName("step");
                for (i = 0; i < x.length; i++) {
                    x[i].className = x[i].className.replace(" active", "");
                }
                //... and adds the "active" class on the current step:
                x[n].className += " active";
                }


                function searchflights(){
                    var xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            $("#loader").hide();
                            res_flights = JSON.parse(this.responseText)
                            list_flights(res_flights);
                            //document.getElementById("demo").innerHTML = this.responseText;
                        }
                    };
                    xhttp.open("POST", "api/searchflight", true);
                    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                    xhttp.send();
                }

                function list_flights(json_flights){
                  
                   count_flight = 0;
                   for(x in json_flights){
                       count_flight +=1;
                   }
                   //document.getElementById("demo").innerHTML = count_flight;
                }
        </script>
    </body>
</html>